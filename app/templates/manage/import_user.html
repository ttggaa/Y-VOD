{% extends "base.html" %}
{% import "_macros.html" as macros %}

{% block title %}导入{{ category.get('name') }}{% endblock %}

{% block content %}
<div class="ui masthead vertical segment">
    <div class="ui container">
        {{ macros.message_widget() }}
        <h1 class="ui center aligned header"><i class="file import icon"></i>导入{{ category.get('name') }}</h1>
    </div>
</div>
<div class="ui main vertical segment">
    <div class="ui container">
        <form id="import-user" action="{{ url_for('manage.import_{}'.format(category.get('url')), next=request.args.get('next')) }}" method="POST" class="ui form">
            {{ form.hidden_tag() }}
            <div class="required field">
                {{ form.token.label() }}
                {{ form.token(placeholder='{}信息码'.format(category.get('name'))) }}
            </div>
            {{ form.submit(class='ui primary button') }}
            <a class="ui button" href="{{ request.args.get('next') or url_for('manage.{}'.format(category.get('url'))) }}">取消</a>
        </form>
    </div>
</div>
{% endblock %}

{% block js %}
<script type="text/javascript">
{{ macros.close_message_js_snippet() }}

$('#import-user').form({
    inline: true,
    on: 'blur',
    fields: {
        token: {
            identifier: 'token',
            rules: [
                {
                    type: 'empty',
                    prompt: '请输入{{ category.get('name') }}信息码'
                }
            ]
        }
    }
});
</script>
{% endblock %}